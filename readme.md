# ScriptingAPIの開発環境テンプレート

開発環境用に次の機能を設定済みのプロジェクトです。

* webpack: 複数のファイルをひとつにまとめる
* ESLint: JavaScriptの文法を確認する

事前準備が整っていれば次のコマンドを実行するだけです。
整っていない場合は、次の項目で設定してください。

```bash
# npmでパッケージをインストールする
npm install

# webpackで複数ファイルをひとつのファイルに変換する
npx webpack
```


## 事前準備

### WindowsにNode.jsをインストールする

次の記事を参考に「Node.js」をWindowsにインストールしてください。
このNode.jsを通して、webpackとESLintを実行します。

* [Node.jsの開発環境を用意しよう！（Windows）](https://prog-8.com/docs/nodejs-env-win)


### VSCodeに拡張機能「ESLint」を入れる

拡張機能パネルを開き、マイクロソフト公式の拡張機能「ESLint」をインストールしてください。


## 各機能の詳しい使い方

### webpackの使い方

#### A. 手動ビルド

次のコマンドでファイルを構築（ビルド）します。

```bash
# コマンドを実行した時にビルド
npx webpack
```

この場合は、更新毎に実行してください。

#### B. 自動ビルド（監視モード）

毎回実行するのは面倒なので、次のようにするとファイル監視モードになり、ファイルを更新したら自動でビルドされるようになります。

```bash
# 対象ファイルを更新したら自動でビルド
npx webpack --watch
```

なお、この監視モードの方がキャッシュが効いてビルド速度が速いので、基本的にはこちらの監視モードで使用してください。



### ESLintの使い方

主に次の3通りの方法があります。


#### A. 手動で問題箇所を修正する

`Control + Shift + M`で「問題パネル」を開く。

正しい記述になっていなければ、ここに問題箇所と内容が表示されるので手動で修正してください。


#### B. コマンドを使って自動で修正する

コマンドパレットから専用のコマンドを選ぶことで、自動で問題箇所を修正してくれます。

1. コマンドパレットを開く: `Control + Shift + P`
2. 自動修正コマンドを実行する: `ESLint: fix all auto-fixable Probrems`

ただし、これは自動で修正可能なものに限るので、まだ問題箇所が残っていれば手動で修正しましょう。


#### C. 保存のたびに自動で修正する

毎回コマンドパレットから実行するのが面倒な場合は、自動で実行するようにすることもできます。

1. コマンドパレットを開く: `Control + Shift + P`
2. 設定ファイルを開く: `Preferences: Open Settings (JSON)`

開いた設定ファイルに次の内容を追記してください。

```json
"editor.codeActionsOnSave": {
    "source.fixAll.eslint": true
},
```

設定ファイルはJSON形式なので、コンマの有無に注意してください。
（間に入れる場合はコンマあり、最後に入れる場合はコンマなし）
